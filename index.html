<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    body {
      margin: 0;
      padding: 0;
      background: transparent;
      display: flex;
      justify-content: center;
      gap: 10px;
    }
    .ad-box {
      width: 160px;
      height: 600px;
    }
  </style>
</head>
<body>
  <div class="ad-box" id="ad1"></div>
  <div class="ad-box" id="ad2"></div>
  <div class="ad-box" id="ad3"></div>

  <script>
    const adKey = 'c10f096e18bf397a19574afffafaa3ca';
    const adIds = ['ad1', 'ad2', 'ad3'];
    let loaded = 0;

    adIds.forEach((id, index) => {
      const container = document.getElementById(id);

      const configScript = document.createElement('script');
      configScript.innerHTML = `
        atOptions = {
          'key': '${adKey}',
          'format': 'iframe',
          'height': 600,
          'width': 160,
          'params': {}
        };
      `;

      const loadScript = document.createElement('script');
      loadScript.src = "//railroadignorant.com/" + adKey + "/invoke.js";

      loadScript.onload = () => {
        loaded++;
        if (loaded === 1) {
          setTimeout(() => {
            window.parent.postMessage({ adLoaded: true }, "*");
          }, 300);
        }
      };

      container.appendChild(configScript);
      container.appendChild(loadScript);
    });

    // Hide ad if nothing loads after 10s
    setTimeout(() => {
      if (loaded === 0) {
        document.body.innerHTML = ''; // hide all
        window.parent.postMessage({ adLoaded: false }, "*");
      }
    }, 10000);
  </script>
</body>
</html>
