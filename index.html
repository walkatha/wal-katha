<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 10px;
      background: transparent;
    }
    .ad-block {
      width: 160px;
      height: 600px;
    }
  </style>
</head>
<body>
  <div class="ad-block" id="ad1"></div>
  <div class="ad-block" id="ad2"></div>
  <div class="ad-block" id="ad3"></div>

  <script>
    const adKey = 'c10f096e18bf397a19574afffafaa3ca';
    const containers = ['ad1', 'ad2', 'ad3'];
    let loadedCount = 0;

    containers.forEach(id => {
      const container = document.getElementById(id);

      const config = document.createElement("script");
      config.innerHTML = `
        atOptions = {
          'key': '${adKey}',
          'format': 'iframe',
          'height': 600,
          'width': 160,
          'params': {}
        };
      `;

      const loader = document.createElement("script");
      loader.src = `//railroadignorant.com/${adKey}/invoke.js`;
      loader.onload = () => {
        loadedCount++;
        if (loadedCount === 1) {
          // Ad successfully shown
          setTimeout(() => {
            window.parent.postMessage({ adLoaded: true }, "*");
          }, 300);
        }
      };

      container.appendChild(config);
      container.appendChild(loader);
    });

    // Remove all if none loaded
    setTimeout(() => {
      if (loadedCount === 0) {
        document.body.innerHTML = '';
        window.parent.postMessage({ adLoaded: false }, "*");
      }
    }, 8000);
  </script>
</body>
</html>
