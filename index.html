<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    body {
      margin: 0;
      padding: 0;
      background: transparent;
      display: flex;
      justify-content: center;
      gap: 10px;
    }
    .ad-block {
      width: 160px;
      height: 600px;
      background: transparent;
    }
  </style>
</head>
<body>
  <div class="ad-block" id="ad1"></div>
  <div class="ad-block" id="ad2"></div>
  <div class="ad-block" id="ad3"></div>

  <script>
    const adKey = 'c10f096e18bf397a19574afffafaa3ca';
    const blocks = ['ad1', 'ad2', 'ad3'];
    let loaded = 0;

    blocks.forEach(id => {
      const el = document.getElementById(id);
      const configScript = document.createElement("script");
      configScript.innerHTML = `
        atOptions = {
          'key': '${adKey}',
          'format': 'iframe',
          'height': 600,
          'width': 160,
          'params': {}
        };
      `;
      const invokeScript = document.createElement("script");
      invokeScript.src = "//railroadignorant.com/" + adKey + "/invoke.js";

      invokeScript.onload = () => {
        loaded++;
        if (loaded === 1) {
          setTimeout(() => {
            window.parent.postMessage({ adLoaded: true }, "*");
          }, 300);
        }
      };

      el.appendChild(configScript);
      el.appendChild(invokeScript);
    });

    // Remove all if nothing loads in 8s
    setTimeout(() => {
      if (loaded === 0) {
        document.body.innerHTML = '';
        window.parent.postMessage({ adLoaded: false }, "*");
      }
    }, 8000);
  </script>
</body>
</html>
